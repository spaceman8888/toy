# 4.langChain.js 연동과 문서 임베딩 준비

### 핵심 개념

|개념|설명|
|---|---|
|Document|LangChain이 이해할 수 있는 텍스트 단위 객체|
|Embeddings|텍스트를 벡터(숫자 배열)로 바꾸는 것|
|VectorStore|벡터들을 저장해두고, 비슷한 걸 빠르게 찾는 저장소|
|MemoryVectorStore|메모리에 저장하는 가장 간단한 벡터 저장소|
|similaritySearch()|질문 벡터와 가장 유사한 문서 chunk 찾기|

1. 텍스트 => Document로 만들어야 LangChain이 쓸 수 있음
2. 그 Document들을 벡터로 바꿔야 AI가 의미를 이해함
3. 그걸 저장할 공간이 VectorStore
4. 질문이 들어오면 => 질문도 벡터화 => 유사한 벡터를 검색해서 답변 생성 

```bash
pnpm install langchain openai
```


## 4-1. langchain document 객체 만들기
langchain에서는 대부분의 데이터를 다음과 같이 감싸서 다룬다
```typescript
new Document({
    pageContent:'문자열 텍스트',
    metadata:{key:value}
})
```
- pageContent : 실제 텍스트 내용
- metadata : 이 텍스트의 출처, 위치, ID 등의 부가 정보

> 💡 왜 Document로 감싸야 하는가?
> Embedding : 텍스트를 벡터로 변환할 때 이 형태를 사용
> 검색 : 유사한 문장을 찾을 때도 Document 배열로 리턴
> 추적 : 어느 chunk에서 나온 내용인지 metadata로 추적 가능 

src/lib/langchain/embed.ts 추가
=> 목적 : 임베딩, 검색, 응답 생성에 사용됨

## 4-2. OpenAI Embeddings 이해하고 적응하기
## 4-3. MemoryVectorStore 만들기
## 4-4. 유사도 검색 테스트