# 5. ë¬¸ì„œ ê¸°ë°˜ GPT ì±—ë´‡ êµ¬í˜„

## 5-1. PromptTemplateìœ¼ë¡œ GPT í”„ë¡¬í”„íŠ¸ ë§Œë“¤ê¸°
> ğŸ¯ ëª©í‘œ
> context + questionì„ ì¡°í•©í•´ GPTì—ê²Œ ì „ë‹¬í•  í”„ë¡¬í”„íŠ¸ ë§Œë“¤ê¸°
> LangChainì˜ PromptTemplate í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ í”„ë¡¬í”„íŠ¸ í¬ë§· ë¶„ë¦¬
> ë‚˜ì¤‘ì— LLM í˜¸ì¶œ ì‹œ ë¬¸ë§¥ ê¸°ë°˜ ì§ˆë¬¸ìœ¼ë¡œ ì •í™•ë„ ë†’ì´ê¸°

> ì™œ PromptTemplateì„ ì“°ëŠ”ê°€?
> ì¬ì‚¬ìš©ì„± : ë§¤ë²ˆ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ì„ ì¡°í•©í•  í•„ìš” ì—†ì´ ë³€ìˆ˜ë§Œ ë°”ê¾¸ë©´ ë¨
> ëª…í™•í•œ í¬ë§· : GPTì—ê²Œ ëª…í™•í•œ ì§€ì‹œì–´ë¥¼ ì£¼ê¸° ìœ„í•œ 'ì •ì œëœ í‹€'
> LangChain ì—°ë™ : LLM í˜¸ì¶œ ì‹œ .format()ìœ¼ë¡œ ìµœì¢… í”„ë¡¬í”„íŠ¸ ìƒì„± ê°€ëŠ¥



## 5-2. ChatOpenAIë¡œ GPT ì‘ë‹µ ë°›ê¸°
> ğŸ¯ ëª©í‘œ
> LangChainì˜ ChatOpenAI í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ GPT ëª¨ë¸ ì´ˆí›Œ
> ìš°ë¦¬ê°€ ë§Œë“  context + question í”„ë¡¬í”„íŠ¸ë¥¼ GPTì—ê²Œ ì „ë‹¬
> ì‘ë‹µ í…ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì™€ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” ì¤€ë¹„

> ChatOpenAIë€?
> LangChainì—ì„œ GPT ê¸°ë°˜ ëª¨ë¸ì„ ì“¸ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ LLM ë˜í¼ í´ë˜ìŠ¤

```ts
// 1. ëª¨ë¸ ìƒì„±
const model = new ChatOpenAI({...});
// 2. í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ ì¤€ë¹„
const finalPrompt = await questionPrompt.format({context,question});
// 3. LLM ì‹¤í–‰
const res = await model.call(finalPrompt);
// 4. ì‘ë‹µ ì¶œë ¥
console.log(res.text)

```

## 5-3. ì‘ë‹µ ì¶œë ¥ UI êµ¬ì„±(ì±— ì¸í„°í˜ì´ìŠ¤)

> ğŸ¯ ëª©í‘œ
> ì‚¬ìš©ìê°€ ì§ˆë¬¸ì„ ì…ë ¥í•˜ë©´
> ìœ ì‚¬í•œ ë¬¸ì„œ chunkê²€ìƒ‰(similaritySearch)
> context + questionìœ¼ë¡œ í”„ë¡¬í”„íŠ¸ ìƒì„±
> GPT í˜¸ì¶œ(askWithContext)
> ì‘ë‹µ ë°˜í™˜

**ì „ì²´íë¦„**
ì§ˆë¬¸ => ë²¡í„° ê²€ìƒ‰ => ê´€ë ¨ chunk => PromptTemplate => GPT í˜¸ì¶œ => ë‹µë³€


|ëª¨ë“ˆ|ì—­í• |
|---|---|
|splitTextIntoChunks|í…ìŠ¤íŠ¸ ìª¼ê°œê¸°|
|toDocuments|chunk => Document ê°ì²´|
|createMemoryStore|Document => ë²¡í„° ì €ì¥ì†Œ ìƒì„±|
|similaritySearch|ì§ˆë¬¸ê³¼ ìœ ì‚¬í•œ chunk ê²€ìƒ‰|
|questionPrompt|PromptTemplate ì •ì˜|
|askWithContext|GPTì—ê²Œ ì§ˆë¬¸ + ë¬¸ë§¥ ì „ë‹¬|

## 5-4. React ê¸°ë°˜ ë¬¸ì„œ ê¸°ë°˜ ì±—ë´‡ UI êµ¬ì„±
> ğŸ¯ ì‚¬ìš©ìê°€ ì§ˆë¬¸ì„ ì…ë ¥í•  ìˆ˜ ìˆëŠ” UI êµ¬í˜„
> ì§ˆë¬¸í•˜ë©´ => GPT ì‘ë‹µì´ ì¶œë ¥ë˜ëŠ” ì±— UI ì™„ì„±
> ìƒíƒœ ê´€ë¦¬(loading,history) í¬í•¨